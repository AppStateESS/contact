
var contact_tab=new ContactTab;var contact_map=new ContactMap;var contact_social=new ContactSocial;var contact_form=new ContactForm;$(document).ready(function(){CKEDITOR.replace("other-information");contact_tab.start();contact_map.start();contact_social.start();contact_form.start();$(function(){$('[data-toggle="tooltip"]').tooltip()})});function ContactForm(){this.start=function(){$("#room-number").keypress(function(a){if(a.which<48||a.which>57){a.preventDefault()}});$("#post-box").keypress(function(a){if(a.which<48||a.which>57){a.preventDefault()}})}}function ContactTab(){var a=this;this.active=active_tab;this.google_url=null;this.start=function(){this.changeTab();$("li.contact-info-tab").click(function(){a.setActive("contact-info")});$("li.map-tab").click(function(){a.setActive("map")});$("li.social-tab").click(function(){a.setActive("social")})};this.resetSections=function(){$(".contact-section").hide();$(".contact-tab a").removeClass("active")};this.setActive=function(b){a.active=b;a.changeTab()};this.changeTab=function(){$(".contact-section").removeClass("active");var c="."+this.active+"-section";var b="."+this.active+"-tab a";this.resetSections();$(c).show();$(b).addClass("active")}}function ContactMap(){var a=this;this.start=function(){$("button.grab-thumbnail").click(this.getGoogleImage);$("button.save-thumbnail").click(this.saveImage);$("button.clear-thumbnail").click(this.clearImage);if(thumbnail_map.length>0){$("button.save-thumbnail").hide();$("button.clear-thumbnail").show()}};this.getGoogleImage=function(){$.getJSON("contact/admin/map/locationString").done(function(b){if(b.error!==undefined){$("#map-error span").html(b.error);$("#map-error").show()}})};this.clearImage=function(){$.getJSON("contact/admin/map/clearThumbnail",{}).done(function(){$(".map-image").html("");$("button.clear-thumbnail").hide();a.clearSuccessMessage()}).fail(function(){alert("Failed to clear Google thumbnail")})};this.saveImage=function(){$.getJSON("contact/admin/map/saveThumbnail",{latitude:$("#latitude").val(),longitude:$("#longitude").val(),}).done(function(b){if(b.result===undefined){alert("Failed to save Google thumbnail")}else{$("button.clear-thumbnail").show();$("button.save-thumbnail").hide();a.imageSuccessMessage()}}).fail(function(){alert("Failed to save Google thumbnail")})};this.imageSuccessMessage=function(){$(".map-section").prepend('<div class="alert alert-success alert-dismissible" role="alert">            <button type = "button" class = "close" data-dismiss="alert" aria-label="Close">            <span aria-hidden="true">&times;</span></button>            Map image saved.</div>')};this.clearSuccessMessage=function(){$(".alert").remove();$(".map-section").prepend('<div class="alert alert-success alert-dismissible" role="alert">            <button type = "button" class = "close" data-dismiss="alert" aria-label="Close">            <span aria-hidden="true">&times;</span></button>            Map image removed.</div>')};this.imageFailureMessage=function(){$(".map-section").prepend('<div class="alert alert-danger alert-dismissible" role="alert">            <button type = "button" class = "close" data-dismiss="alert" aria-label="Close">            <span aria-hidden="true">&times;</span></button>            <strong>Error:</strong> Map image could not be saved successfully.</div>')};this.makeGoogleMap=function(b){var d;var e;var c;d=new google.maps.Geocoder();d.geocode({address:b},function(g,f){if(f==google.maps.GeocoderStatus.OK){e=g[0].geometry.location.lat();c=g[0].geometry.location.lng();a.createGoogleLink(e,c)}else{alert("Geocode was not successful for the following reason: "+f)}})};this.createGoogleLink=function(c,b){$.getJSON("contact/admin/map/getGoogleLink",{latitude:c,longitude:b,}).done(function(d){if(d.error!==undefined){$("#map-error").show()}else{$("button.save-thumbnail").show();a.pushImageToPage(d.url);a.fillHiddenVars(c,b)}})};this.fillHiddenVars=function(c,b){$("#latitude").val(c);$("#longitude").val(b)};this.pushImageToPage=function(b){var c;c='<img id="google-map-image" src="'+b+'" />';$(".map-image").html(c)}}function ContactSocial(){var a=this;this.start=function(){var b;this.all_tabs=$(".social-pick-tab");b=$(this.all_tabs[0]);b.children("a.nav-link").addClass("active");this.loadCurrentLink(b.data("label"));this.readyTabs();this.populateForm();this.readySaveButton();this.readyClearButton();this.readyUrl()};this.readyUrl=function(){$("#social-url").focusout(function(){a.current_url=$(this).val()})};this.loadCurrentLink=function(b){this.current_label=b;this.current_icon=social_urls[b].icon;this.current_url=social_urls[b].url;this.current_prefix=social_urls[b].prefix};this.populateForm=function(){$("#social-icon").html('<i class="'+this.current_icon+' fa-5x"></i>');$("#social-url").val(this.current_url);$("#social-prefix").html(this.current_prefix)};this.readyTabs=function(){var b;$(".social-pick-tab").click(function(){$(".social-success").hide();b=$(this).data("label");a.loadCurrentLink(b);a.setActiveTab($(this).children("a"));a.populateForm()})};this.readySaveButton=function(){$("#save-social-link").click(function(){if(a.current_url.length<1){return}a.postUrl()})};this.postUrl=function(){$.post("contact/admin/social/save_url",{label:a.current_label,url:a.current_url,}).done(function(){social_urls[a.current_label].url=a.current_url;$(".social-success").show()})};this.readyClearButton=function(){$("#clear-social-link").click(function(){a.current_url="";a.populateForm();social_urls[a.current_label].url="";a.postUrl()})};this.setActiveTab=function(b){$(".social-pick-tab a").removeClass("active");$(b).addClass("active")}};