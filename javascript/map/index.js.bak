import 'leaflet/dist/leaflet.css'
import L from 'leaflet'

/* global $ */

const accessToken = 'pk.eyJ1IjoibWNuYW5leW0iLCJhIjoiY2prNDJ5NDNzMTVmejN3bGVrNGFvM2UxZSJ9.5GmrHJStz_' +
    'X0X7X3EJinwg'

const showMap = (lat, long) => {
  const mymap = L.map('map').setView([
    lat, long,
  ], 17)
  L.tileLayer({
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> con' +
        'tributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<' +
        '/a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: accessToken
  }).addTo(mymap)
}

$.getJSON('https://nominatim.openstreetmap.org/search', {
  format: 'json',
  q: '287 Rivers Street Boone, North Carolina 28608',
  email: 'mcnaneym@appstate.edu',
}).done(function (data) {
  const lat = parseInt(data[0].lat)
  const long = parseInt(data[0].lon)
  showMap(lat, long)
}.bind(this))
